<p-toast></p-toast>

<div class="reserva-evento-layout">
  <div class="left">
    <h3>Reserva</h3>
    <p-autoComplete
      [(ngModel)]="reservaSelecionada"
      [suggestions]="reservas"
      field="coduh"
      (completeMethod)="buscarReserva($event)"
      placeholder="Código UH"
    ></p-autoComplete>

    <p-card *ngIf="reservaSelecionada" class="reserva-info">
      <div>ID: {{ reservaSelecionada.id }}</div>
      <div>Hóspede: {{ reservaSelecionada.nome_hospede }}</div>
      <div>Check-in: {{ reservaSelecionada.data_checkin }}</div>
      <div>Check-out: {{ reservaSelecionada.data_checkout }}</div>
      <div>Hóspedes: {{ reservaSelecionada.qtd_hospedes }}</div>
    </p-card>
  </div>

  <div class="right">
    <h3>Evento</h3>
    <p-datepicker [(ngModel)]="dataEvento" (onSelect)="selecionarData()" placeholder="Data do evento"></p-datepicker>
    <p-dropdown
      [(ngModel)]="eventoSelecionado"
      [options]="eventos"
      optionLabel="nome"
      optionValue="id"
      placeholder="Evento do dia"
      (onChange)="onEventoChange()"
    ></p-dropdown>

    <div *ngIf="disponibilidade" class="disponibilidade">
      <p-chart type="doughnut" [data]="chartData"></p-chart>
      <div class="info">
        <p>Capacidade: {{ disponibilidade.capacidade_total }}</p>
        <p>Reservas: {{ disponibilidade.ocupacao }}</p>
        <p>Vagas: {{ disponibilidade.vagas_restantes }}</p>
      </div>
    </div>

    <div class="save-form">
      <textarea
        pInputTextarea
        [(ngModel)]="informacoes"
        placeholder="Informações adicionais"
      ></textarea>
      <p-inputNumber [(ngModel)]="quantidade" [min]="1" placeholder="Quantidade de pessoas"></p-inputNumber>
      <button
        pButton
        type="button"
        label="Salvar marcação"
        (click)="salvarMarcacao()"
        [disabled]="!reservaSelecionada || !eventoSelecionado"
      ></button>
    </div>
  </div>
</div>

